<h2 class="proposal"><strong>All Proposals</strong> => A listing of every proposal submitted in the BOLD database.</h2>

  <% if user_signed_in? %>
  <%= link_to 'New Proposal', new_proposal_path, class:"btn btn-default" %>
<% end %>
<br />
<% form_tag proposals_path do %>

<% end %>
<br />

<% if current_user.admin? %>
<p>To manage a proposal, click <strong>"View"</strong> for any proposal. From there, you can read the proposal and approve or reject it. You can also assign it to a specific course.</p>
<% end %>


<div id="users">
  <p>Explore the database!</p>
  <input class="search" placeholder="Search" />
<select name="status" id="status">
    <option value ="all">Select a status</option>
    <option value="Pending">Pending</option>
    <option value="Approved", "all">Approved</option>
    <option value="Rejected" ,"all">Rejected</option>
    <option value="Completed" ,"all">Completed</option>
</select> 
<select name="category" id="category">
    <option selected="selected" value="all">Select a category</option>
    <option value="Editing">Editing</option>
    <option value="General Design">General Design</option>
    <option value="Grant/proposal writing">Grant/proposal writing</option>
    <option value="Manuals or Procedures">Manuals or Procedures</option>
    <option value="Marketing Materials">Marketing Materials</option>
  <option value="Research Report">Research Study and Report</option>   
    <option value="Web Design/Development">Web Design/Development</option>
    <option value="Others">Others</option>
</select> 
<select name="course" id="course">
    <option selected="selected" value="all">Select a course</option>
    <option value="TECM 3000">TECM 3000</option>
    <option value="TECM 3100">TECM 3100</option>
    <option value="TECM 3200">TECM 3200</option>
    <option value="TECM 4100">TECM 4100</option>
    <option value="TECM 4180">TECM 4180</option>
    <option value="TECM 4190">TECM 4190</option>
    <option value="TECM 4200">TECM 4200</option>
    <option value="TECM 4190">TECM 4190</option>
    <option value="TECM 4250">TECM 4250</option>
    <option value="TECM 4700">TECM 4700</option>
</select> 
<select name="semester" id="semester">
    <option selected="selected" value="all">Select a semester</option>
    <option value="Spring 2015">Spring 2015</option>
    <option value="Summer 2015">Summer 2015</option>
    <option value="Fall 2016">Fall 2016</option>
    <option value="Spring 2016">Spring 2016</option>
    <option value="Summer 2016">Summer 2016</option>
</select> 

<button id="none">Clear all filters</button>
  <!--
  <button class="sort" data-sort="name">
    Sort by name
  </button>
  <button class="sort" data-sort="organization">
    Sort by organization
  </button>
    <button class="sort" data-sort="category">
    Sort by category
  </button>
     <button class="sort" data-sort="semester">
    Sort by semester
  </button>
   <button class="sort" data-sort="length">
    Sort by length
  </button>
 <button class="sort" data-sort="status">
    Sort by status
  </button>
-->
<div class ="table-responsive">
<table class ="table table-striped table-hover">
  <thead>
    <tr>
      <th class="sort" data-sort="date">Date Created</th>
      <th class="sort" data-sort="name">Name</th>
      <th class="sort" data-sort="organization">Organization</th>
      <th class="sort" data-sort="title">Title</th>
      <th class="sort" data-sort="category">Category</th>
      <th class="sort" data-sort="semester">Semester</th>
      <th class="sort" data-sort="length">Project Length</th>
      <th class="sort" data-sort="email">Email</th>
      <th class="sort" data-sort="status">Status</th>
      <th class="sort" data-sort="course">Course</th>
    </tr>
  </thead>

  <tbody class="list">
    <% @proposals.each do |proposal| %>
      <tr>
        <td class="date"><%= proposal.created_at %></td>
        <td class="name"><%= link_to [proposal.first_name, proposal.last_name].join(" "), proposal %></td>
        <td class="organization"><%= proposal.organization %></td>          
        <td class="title"><%= link_to proposal.title, proposal %></td>
        <td class="category"><%= proposal.subject %></td>
        <td class="semester"><%= proposal.semester_id %></td>
        <td class="length"><%= proposal.time %></td>
        <td class="email"><%= proposal.user.email if proposal.user %></td>
        <% for claim in proposal.claims %>
      
          <td><%= claim.proposal.user.name %></td>
          <% end %>
        <td class="course"><%= proposal.course %></td>
        <td><%= link_to 'View', proposal %></td>
        <% if can? :update, proposal %>
          <td><%= link_to 'Edit', edit_proposal_path(proposal) %></td>
        <% end %>
        <% if can? :destroy, proposal %>
          <td><%= link_to 'Delete', proposal, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
            
      
      </tr>
    <% end %>
  </tbody>
</table>

</div>
</div> 

<br>


